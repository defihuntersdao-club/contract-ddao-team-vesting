#!/usr/bin/php
<?php
include "conf.php";



//for($i = 1;$i<5;$i++)
//$i = 1;
{
//$b = "0xfc1fa192";
//$b = "0xc1d4931e";
unset($v,$t);
//$b .= view_number($i,64,0);
$b = "0x2aa3c60a0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000330ec7c6afc3cf19511ad4041e598b235d44862f0000000000000000000000000000000000000000000000000000000000000000";
$b = "0x2aa3c60a0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000330ec7c6afc3cf19511ad4041e598b235d44862f0000000000000000000000000000000000000000000000000000000067e6b16c";
//$b = "0x2aa3c60a0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000d54201a17a0b00f5726a38ee6bccae1371631dd60000000000000000000000000000000000000000000000000000000067e6b16c";
$b = "0x2aa3c60a0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000ea10dd05cf0a12ab1bdbd202fa8707d3bfd087370000000000000000000000000000000000000000000000000000000067e6b16c";
//$b = "0x2aa3c60a000000000000000000000000000000000000000000000000000000000000000100000000000000000000000057266f25439b60a94e4a47cbc1bf1a2a6c1191090000000000000000000000000000000000000000000000000000000000000000";
//$b = "0x2aa3c60a00000000000000000000000000000000000000000000000000000000000000010000000000000000000000005bb72943dfd6201897d163d06daec4c4557ab25c0000000000000000000000000000000000000000000000000000000000000000";
//$b = "0x2aa3c60a000000000000000000000000000000000000000000000000000000000000000100000000000000000000000057266f25439b60a94e4a47cbc1bf1a2a6c1191090000000000000000000000000000000000000000000000000000000067e6b16c";
//$b = "0x2aa3c60a00000000000000000000000000000000000000000000000000000000000000010000000000000000000000005bb72943dfd6201897d163d06daec4c4557ab25c0000000000000000000000000000000000000000000000000000000067e6b16c";
//$t[from] = $wal;
$t[from] = "0x0000000000000000000000000000000000000000";
$t[data] = $b;
$t[to] = $contractAddress;
//print_r($t);

$v[jsonrpc] = "2.0";
$v[method] = "eth_call";
//$v[params][0] = $row[wal];
$v[params][0] = $t;
$v[params][1] = "latest";
//$v[id] = $row[id];
$v[id] = "RewardCalc";
$jss[] = $v;
}
//print_r($jss);

print "Send ".count($jss)." requests to blockchain\n";
$t = $time;
//print "Get data from blockchain in ".count($jss)." requests\n";
if(count($jss))
{
$mas = curl_mas2($jss,$rpc,1);
}
$t = time()-$t;
print "Get data from blockchain in ".count($jss)." requests [$t sec]\n";

print_r($mas);

$t = $mas[0][result];
$t = hexdec($t);
$t /= 10**18;

print "T: $t\n";